<!DOCTYPE html>

<html xmlns="http://www.w3.org/1999/xhtml">

<head>

<meta charset="utf-8" />
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta name="generator" content="pandoc" />


<meta name="author" content="Joel Herndon &amp; John Little" />

<meta name="date" content="2017-08-23" />

<title>Intro to R by Data &amp; Visualization Services</title>

<script src="site_libs/jquery-1.11.3/jquery.min.js"></script>
<meta name="viewport" content="width=device-width, initial-scale=1" />
<link href="site_libs/bootstrap-3.3.5/css/flatly.min.css" rel="stylesheet" />
<script src="site_libs/bootstrap-3.3.5/js/bootstrap.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/html5shiv.min.js"></script>
<script src="site_libs/bootstrap-3.3.5/shim/respond.min.js"></script>
<script src="site_libs/jqueryui-1.11.4/jquery-ui.min.js"></script>
<link href="site_libs/tocify-1.9.1/jquery.tocify.css" rel="stylesheet" />
<script src="site_libs/tocify-1.9.1/jquery.tocify.js"></script>
<script src="site_libs/navigation-1.1/tabsets.js"></script>
<link href="site_libs/highlightjs-1.1/textmate.css" rel="stylesheet" />
<script src="site_libs/highlightjs-1.1/highlight.js"></script>
<script src="site_libs/detect-resize-0.5.3/jquery.resize.js"></script>
<link href="site_libs/jquery-ui-1.11.4/jquery-ui.min.css" rel="stylesheet" />
<script src="site_libs/jquery-ui-1.11.4/jquery-ui.min.js"></script>
<script src="site_libs/d3-3.5.2/d3.min.js"></script>
<script src="site_libs/vega-1.4.3/vega.min.js"></script>
<script src="site_libs/lodash-2.2.1/lodash.min.js"></script>
<script>var lodash = _.noConflict();</script>
<link href="site_libs/ggvis-0.4.3/css/ggvis.css" rel="stylesheet" />
<script src="site_libs/ggvis-0.4.3/js/ggvis.js"></script>
<link href="site_libs/font-awesome-4.5.0/css/font-awesome.min.css" rel="stylesheet" />

<style type="text/css">code{white-space: pre;}</style>
<style type="text/css">
  pre:not([class]) {
    background-color: white;
  }
</style>
<script type="text/javascript">
if (window.hljs && document.readyState && document.readyState === "complete") {
   window.setTimeout(function() {
      hljs.initHighlighting();
   }, 0);
}
</script>



<style type="text/css">
h1 {
  font-size: 34px;
}
h1.title {
  font-size: 38px;
}
h2 {
  font-size: 30px;
}
h3 {
  font-size: 24px;
}
h4 {
  font-size: 18px;
}
h5 {
  font-size: 16px;
}
h6 {
  font-size: 12px;
}
.table th:not([align]) {
  text-align: left;
}
</style>

<link rel="stylesheet" href="duke.css" type="text/css" />

</head>

<body>

<style type = "text/css">
.main-container {
  max-width: 940px;
  margin-left: auto;
  margin-right: auto;
}
code {
  color: inherit;
  background-color: rgba(0, 0, 0, 0.04);
}
img {
  max-width:100%;
  height: auto;
}
.tabbed-pane {
  padding-top: 12px;
}
button.code-folding-btn:focus {
  outline: none;
}
</style>


<style type="text/css">
/* padding for bootstrap navbar */
body {
  padding-top: 60px;
  padding-bottom: 40px;
}
/* offset scroll position for anchor links (for fixed navbar)  */
.section h1 {
  padding-top: 65px;
  margin-top: -65px;
}

.section h2 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h3 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h4 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h5 {
  padding-top: 65px;
  margin-top: -65px;
}
.section h6 {
  padding-top: 65px;
  margin-top: -65px;
}
</style>

<script>
// manage active state of menu based on current page
$(document).ready(function () {
  // active menu anchor
  href = window.location.pathname
  href = href.substr(href.lastIndexOf('/') + 1)
  if (href === "")
    href = "index.html";
  var menuAnchor = $('a[href="' + href + '"]');

  // mark it active
  menuAnchor.parent().addClass('active');

  // if it's got a parent navbar menu mark it active as well
  menuAnchor.closest('li.dropdown').addClass('active');
});
</script>


<div class="container-fluid main-container">

<!-- tabsets -->
<script>
$(document).ready(function () {
  window.buildTabsets("TOC");
});
</script>

<!-- code folding -->




<script>
$(document).ready(function ()  {

    // move toc-ignore selectors from section div to header
    $('div.section.toc-ignore')
        .removeClass('toc-ignore')
        .children('h1,h2,h3,h4,h5').addClass('toc-ignore');

    // establish options
    var options = {
      selectors: "h1,h2",
      theme: "bootstrap3",
      context: '.toc-content',
      hashGenerator: function (text) {
        return text.replace(/[.\\/?&!#<>]/g, '').replace(/\s/g, '_').toLowerCase();
      },
      ignoreSelector: ".toc-ignore",
      scrollTo: 0
    };
    options.showAndHide = false;
    options.smoothScroll = true;

    // tocify
    var toc = $("#TOC").tocify(options).data("toc-tocify");
});
</script>

<style type="text/css">

#TOC {
  margin: 25px 0px 20px 0px;
}
@media (max-width: 768px) {
#TOC {
  position: relative;
  width: 100%;
}
}


.toc-content {
  padding-left: 30px;
  padding-right: 40px;
}

div.main-container {
  max-width: 1200px;
}

div.tocify {
  width: 20%;
  max-width: 260px;
  max-height: 85%;
}

@media (min-width: 768px) and (max-width: 991px) {
  div.tocify {
    width: 25%;
  }
}

@media (max-width: 767px) {
  div.tocify {
    width: 100%;
    max-width: none;
  }
}

.tocify ul, .tocify li {
  line-height: 20px;
}

.tocify-subheader .tocify-item {
  font-size: 0.90em;
  padding-left: 25px;
  text-indent: 0;
}

.tocify .list-group-item {
  border-radius: 0px;
}

.tocify-subheader {
  display: inline;
}
.tocify-subheader .tocify-item {
  font-size: 0.95em;
}

</style>

<!-- setup 3col/9col grid for toc_float and main content  -->
<div class="row-fluid">
<div class="col-xs-12 col-sm-4 col-md-3">
<div id="TOC" class="tocify">
</div>
</div>

<div class="toc-content col-xs-12 col-sm-8 col-md-9">




<div class="navbar navbar-default  navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar">
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <a class="navbar-brand" href="index.html">Intro to R</a>
    </div>
    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
        <li>
  <a href="index.html">Home</a>
</li>
<li>
  <a href="data_management.html">Load Data</a>
</li>
<li>
  <a href="https://libjohn.shinyapps.io/intro2r-assignments2/">Exercise One</a>
</li>
<li>
  <a href="data_wrangling.html">Data Wrangling</a>
</li>
<li>
  <a href="https://libjohn.shinyapps.io/intro2r-assignments2/">Exercise Two</a>
</li>
<li>
  <a href="visualization.nb.html">Visualization</a>
</li>
      </ul>
      <ul class="nav navbar-nav navbar-right">
        <li>
  <a href="https://github.com/data-and-visualization/Intro2R">
    <span class="fa fa-github"></span>
     
  </a>
</li>
      </ul>
    </div><!--/.nav-collapse -->
  </div><!--/.container -->
</div><!--/.navbar -->

<div class="fluid-row" id="header">



<h1 class="title toc-ignore">Intro to R by Data &amp; Visualization Services</h1>
<h4 class="author"><em>Joel Herndon &amp; John Little</em></h4>
<h4 class="date"><em>2017-08-23</em></h4>

</div>


<div id="intro-to-r" class="section level1">
<h1>Intro to R</h1>
<div id="housekeeping-joel" class="section level2">
<h2>Housekeeping (Joel)</h2>
<div id="overview-ppt" class="section level4">
<h4>Overview PPT</h4>
<pre class="r"><code>library(tidyverse)
library(ggvis)</code></pre>
</div>
</div>
<div id="data-management-john" class="section level2">
<h2>Data Management (John)</h2>
<ul>
<li>We’ll use a derivitive of the <code>mtcars</code> dataset.<br />
</li>
<li>Use the <code>?mtcars</code> to get the codebook.</li>
</ul>
<div id="load-data" class="section level3">
<h3>Load Data</h3>
<p>RStudio has an on-board data loading wizard which uses the <code>readr()</code> package for data loading.<br />
See Menubar <code>File &gt; Import Dataset</code></p>
<blockquote>
<div class="figure">
<img src="images/import_data.png" title="Environment Pane" alt="RStudio Environment Pane" />
<p class="caption">RStudio Environment Pane</p>
</div>
</blockquote>
<p> </p>
<pre class="r"><code># readr::read_csv
# &#39;read_csv()&#39; is part of the &#39;readr&#39; package and will override the base-R default of converting characters as factors.  https://cran.r-project.org/web/packages/readr/README.html

cars &lt;- read_csv(&quot;data/cars.csv&quot;)</code></pre>
</div>
<div id="view-your-data-in-a-grid" class="section level3">
<h3>View your data in a grid</h3>
<pre class="r"><code>View(cars)
# Displays as a tab in the source-pane quadrant
# Does not dipsplay in an R Notebooks</code></pre>
<div id="other-data-loaders-a-selective-list" class="section level4">
<h4>Other Data Loaders, a selective list</h4>
<ul>
<li><p><code>View()</code> is an exploratory convenience; it’s not “reproducible” in the sense of generating a report or leaving a trail of your work. One of the advantages is on-board clickable sorting</p></li>
<li><p>Environment Pane has information about data objects</p></li>
</ul>
</div>
</div>
<div id="modern-data-frames-tibbles" class="section level3">
<h3>Modern Data Frames: Tibbles</h3>
<ul>
<li>“Table as data frame”“, a modern tidyverse table</li>
</ul>
<pre class="r"><code>cars </code></pre>
<pre><code>## # A tibble: 32 x 12
##      mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  21.0     6 160.0   110  3.90 2.620 16.46     0     1     4     4
##  2  21.0     6 160.0   110  3.90 2.875 17.02     0     1     4     4
##  3  22.8     4 108.0    93  3.85 2.320 18.61     1     1     4     1
##  4  21.4     6 258.0   110  3.08 3.215 19.44     1     0     3     1
##  5  18.7     8 360.0   175  3.15 3.440 17.02     0     0     3     2
##  6  18.1     6 225.0   105  2.76 3.460 20.22     1     0     3     1
##  7  14.3     8 360.0   245  3.21 3.570 15.84     0     0     3     4
##  8  24.4     4 146.7    62  3.69 3.190 20.00     1     0     4     2
##  9  22.8     4 140.8    95  3.92 3.150 22.90     1     0     4     2
## 10  19.2     6 167.6   123  3.92 3.440 18.30     1     0     4     4
## # ... with 22 more rows, and 1 more variables: makeModel &lt;chr&gt;</code></pre>
<p> </p>
</div>
<div id="data-structure" class="section level3">
<h3>Data Structure</h3>
<div id="class" class="section level4">
<h4>Class</h4>
<pre class="r"><code>class(cars)</code></pre>
<pre><code>## [1] &quot;tbl_df&quot;     &quot;tbl&quot;        &quot;data.frame&quot;</code></pre>
<p> </p>
</div>
<div id="glimpse-into-a-data-frame" class="section level4">
<h4>Glimpse into a data frame</h4>
<pre class="r"><code>glimpse(cars)</code></pre>
<pre><code>## Observations: 32
## Variables: 12
## $ mpg       &lt;dbl&gt; 21.0, 21.0, 22.8, 21.4, 18.7, 18.1, 14.3, 24.4, 22.8...
## $ cyl       &lt;dbl&gt; 6, 6, 4, 6, 8, 6, 8, 4, 4, 6, 6, 8, 8, 8, 8, 8, 8, 4...
## $ disp      &lt;dbl&gt; 160.0, 160.0, 108.0, 258.0, 360.0, 225.0, 360.0, 146...
## $ hp        &lt;dbl&gt; 110, 110, 93, 110, 175, 105, 245, 62, 95, 123, 123, ...
## $ drat      &lt;dbl&gt; 3.90, 3.90, 3.85, 3.08, 3.15, 2.76, 3.21, 3.69, 3.92...
## $ wt        &lt;dbl&gt; 2.620, 2.875, 2.320, 3.215, 3.440, 3.460, 3.570, 3.1...
## $ qsec      &lt;dbl&gt; 16.46, 17.02, 18.61, 19.44, 17.02, 20.22, 15.84, 20....
## $ vs        &lt;dbl&gt; 0, 0, 1, 1, 0, 1, 0, 1, 1, 1, 1, 0, 0, 0, 0, 0, 0, 1...
## $ am        &lt;dbl&gt; 1, 1, 1, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 1...
## $ gear      &lt;dbl&gt; 4, 4, 4, 3, 3, 3, 3, 4, 4, 4, 4, 3, 3, 3, 3, 3, 3, 4...
## $ carb      &lt;dbl&gt; 4, 4, 1, 1, 2, 1, 4, 2, 2, 4, 4, 3, 3, 3, 4, 4, 4, 1...
## $ makeModel &lt;chr&gt; &quot;Mazda RX4&quot;, &quot;Mazda RX4 Wag&quot;, &quot;Datsun 710&quot;, &quot;Hornet ...</code></pre>
<p> </p>
</div>
<div id="older-style" class="section level4">
<h4>Older style</h4>
<p><code>str()</code> works on all data structures: data frames, matricies, lists, etc.</p>
<pre class="r"><code>str(cars)</code></pre>
<pre><code>## Classes &#39;tbl_df&#39;, &#39;tbl&#39; and &#39;data.frame&#39;:    32 obs. of  12 variables:
##  $ mpg      : num  21 21 22.8 21.4 18.7 18.1 14.3 24.4 22.8 19.2 ...
##  $ cyl      : num  6 6 4 6 8 6 8 4 4 6 ...
##  $ disp     : num  160 160 108 258 360 ...
##  $ hp       : num  110 110 93 110 175 105 245 62 95 123 ...
##  $ drat     : num  3.9 3.9 3.85 3.08 3.15 2.76 3.21 3.69 3.92 3.92 ...
##  $ wt       : num  2.62 2.88 2.32 3.21 3.44 ...
##  $ qsec     : num  16.5 17 18.6 19.4 17 ...
##  $ vs       : num  0 0 1 1 0 1 0 1 1 1 ...
##  $ am       : num  1 1 1 0 0 0 0 0 0 0 ...
##  $ gear     : num  4 4 4 3 3 3 3 4 4 4 ...
##  $ carb     : num  4 4 1 1 2 1 4 2 2 4 ...
##  $ makeModel: chr  &quot;Mazda RX4&quot; &quot;Mazda RX4 Wag&quot; &quot;Datsun 710&quot; &quot;Hornet 4 Drive&quot; ...
##  - attr(*, &quot;spec&quot;)=List of 2
##   ..$ cols   :List of 12
##   .. ..$ mpg      : list()
##   .. .. ..- attr(*, &quot;class&quot;)= chr  &quot;collector_double&quot; &quot;collector&quot;
##   .. ..$ cyl      : list()
##   .. .. ..- attr(*, &quot;class&quot;)= chr  &quot;collector_double&quot; &quot;collector&quot;
##   .. ..$ disp     : list()
##   .. .. ..- attr(*, &quot;class&quot;)= chr  &quot;collector_double&quot; &quot;collector&quot;
##   .. ..$ hp       : list()
##   .. .. ..- attr(*, &quot;class&quot;)= chr  &quot;collector_double&quot; &quot;collector&quot;
##   .. ..$ drat     : list()
##   .. .. ..- attr(*, &quot;class&quot;)= chr  &quot;collector_double&quot; &quot;collector&quot;
##   .. ..$ wt       : list()
##   .. .. ..- attr(*, &quot;class&quot;)= chr  &quot;collector_double&quot; &quot;collector&quot;
##   .. ..$ qsec     : list()
##   .. .. ..- attr(*, &quot;class&quot;)= chr  &quot;collector_double&quot; &quot;collector&quot;
##   .. ..$ vs       : list()
##   .. .. ..- attr(*, &quot;class&quot;)= chr  &quot;collector_double&quot; &quot;collector&quot;
##   .. ..$ am       : list()
##   .. .. ..- attr(*, &quot;class&quot;)= chr  &quot;collector_double&quot; &quot;collector&quot;
##   .. ..$ gear     : list()
##   .. .. ..- attr(*, &quot;class&quot;)= chr  &quot;collector_double&quot; &quot;collector&quot;
##   .. ..$ carb     : list()
##   .. .. ..- attr(*, &quot;class&quot;)= chr  &quot;collector_double&quot; &quot;collector&quot;
##   .. ..$ makeModel: list()
##   .. .. ..- attr(*, &quot;class&quot;)= chr  &quot;collector_character&quot; &quot;collector&quot;
##   ..$ default: list()
##   .. ..- attr(*, &quot;class&quot;)= chr  &quot;collector_guess&quot; &quot;collector&quot;
##   ..- attr(*, &quot;class&quot;)= chr &quot;col_spec&quot;</code></pre>
<p> </p>
</div>
<div id="useful-command" class="section level4">
<h4>Useful Command</h4>
<p><code>tbl_vars</code> lists table variables (column headers) as a vector</p>
<pre class="r"><code>tbl_vars(cars)</code></pre>
<pre><code>##  [1] &quot;mpg&quot;       &quot;cyl&quot;       &quot;disp&quot;      &quot;hp&quot;        &quot;drat&quot;     
##  [6] &quot;wt&quot;        &quot;qsec&quot;      &quot;vs&quot;        &quot;am&quot;        &quot;gear&quot;     
## [11] &quot;carb&quot;      &quot;makeModel&quot;</code></pre>
<p> </p>
</div>
</div>
</div>
<div id="exercise-part-one-loading-data-joel" class="section level2">
<h2>EXERCISE, Part One: Loading Data (Joel)</h2>
<ol style="list-style-type: decimal">
<li>Take the <a href="https://libjohn.shinyapps.io/intro2r-assignments2/">Quiz</a></li>
<li>Hands-on (in an R file): File &gt; Open File &gt; Student_Assignments.Rmd (Part One)</li>
</ol>
<p> </p>
</div>
<div id="data-reshaping---dplyr-john" class="section level2">
<h2>Data Reshaping - dplyr (John)</h2>
<p><strong>dplyr</strong> is a widely adopted r package, part of tidyverse, which uses <strong>five English verbs</strong> to reshape data</p>
<div id="arrange" class="section level3">
<h3>Arrange</h3>
<p><strong>Arrange</strong> to sort rows by column</p>
<pre class="r"><code>cars %&gt;% 
  arrange(cyl, desc(mpg), desc(hp))</code></pre>
<pre><code>## # A tibble: 32 x 12
##      mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
##    &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1  33.9     4  71.1    65  4.22 1.835 19.90     1     1     4     1
##  2  32.4     4  78.7    66  4.08 2.200 19.47     1     1     4     1
##  3  30.4     4  95.1   113  3.77 1.513 16.90     1     1     5     2
##  4  30.4     4  75.7    52  4.93 1.615 18.52     1     1     4     2
##  5  27.3     4  79.0    66  4.08 1.935 18.90     1     1     4     1
##  6  26.0     4 120.3    91  4.43 2.140 16.70     0     1     5     2
##  7  24.4     4 146.7    62  3.69 3.190 20.00     1     0     4     2
##  8  22.8     4 140.8    95  3.92 3.150 22.90     1     0     4     2
##  9  22.8     4 108.0    93  3.85 2.320 18.61     1     1     4     1
## 10  21.5     4 120.1    97  3.70 2.465 20.01     1     0     3     1
## # ... with 22 more rows, and 1 more variables: makeModel &lt;chr&gt;</code></pre>
</div>
<div id="select" class="section level3">
<h3>Select</h3>
<p><strong>Select</strong> to choose columns (variables)</p>
<pre class="r"><code>cars %&gt;% 
    arrange(cyl, desc(mpg), desc(hp)) %&gt;% 
    select(makeModel, cyl, mpg, hp)</code></pre>
<pre><code>## # A tibble: 32 x 4
##         makeModel   cyl   mpg    hp
##             &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
##  1 Toyota Corolla     4  33.9    65
##  2       Fiat 128     4  32.4    66
##  3   Lotus Europa     4  30.4   113
##  4    Honda Civic     4  30.4    52
##  5      Fiat X1-9     4  27.3    66
##  6  Porsche 914-2     4  26.0    91
##  7      Merc 240D     4  24.4    62
##  8       Merc 230     4  22.8    95
##  9     Datsun 710     4  22.8    93
## 10  Toyota Corona     4  21.5    97
## # ... with 22 more rows</code></pre>
</div>
<div id="filter" class="section level3">
<h3>Filter</h3>
<p><strong>Filter</strong> to select rows</p>
<pre class="r"><code>sixcyls &lt;- cars %&gt;% 
  filter(cyl == 6)

sixcyls    # display filtered data frame</code></pre>
<pre><code>## # A tibble: 7 x 12
##     mpg   cyl  disp    hp  drat    wt  qsec    vs    am  gear  carb
##   &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;
## 1  21.0     6 160.0   110  3.90 2.620 16.46     0     1     4     4
## 2  21.0     6 160.0   110  3.90 2.875 17.02     0     1     4     4
## 3  21.4     6 258.0   110  3.08 3.215 19.44     1     0     3     1
## 4  18.1     6 225.0   105  2.76 3.460 20.22     1     0     3     1
## 5  19.2     6 167.6   123  3.92 3.440 18.30     1     0     4     4
## 6  17.8     6 167.6   123  3.92 3.440 18.90     1     0     4     4
## 7  19.7     6 145.0   175  3.62 2.770 15.50     0     1     5     6
## # ... with 1 more variables: makeModel &lt;chr&gt;</code></pre>
</div>
<div id="mutate" class="section level3">
<h3>Mutate</h3>
<p><strong>Mutate</strong> to create new variables (add columns)</p>
<pre class="r"><code>sixcyls %&gt;% 
  mutate(dispWt = disp / wt) %&gt;% 
  select(makeModel, cyl, mpg, hp, dispWt)</code></pre>
<pre><code>## # A tibble: 7 x 5
##        makeModel   cyl   mpg    hp   dispWt
##            &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
## 1      Mazda RX4     6  21.0   110 61.06870
## 2  Mazda RX4 Wag     6  21.0   110 55.65217
## 3 Hornet 4 Drive     6  21.4   110 80.24883
## 4        Valiant     6  18.1   105 65.02890
## 5       Merc 280     6  19.2   123 48.72093
## 6      Merc 280C     6  17.8   123 48.72093
## 7   Ferrari Dino     6  19.7   175 52.34657</code></pre>
</div>
<div id="count" class="section level3">
<h3>Count</h3>
<p><strong>Count</strong> to summarize observations (or rows)</p>
<pre class="r"><code>sixcyls %&gt;% 
  count(hp)</code></pre>
<pre><code>## # A tibble: 4 x 2
##      hp     n
##   &lt;dbl&gt; &lt;int&gt;
## 1   105     1
## 2   110     3
## 3   123     2
## 4   175     1</code></pre>
</div>
<div id="summarize" class="section level3">
<h3>Summarize</h3>
<p>Summarize to collapse values into a summary</p>
<pre class="r"><code>sixcyls %&gt;% 
  group_by(hp) %&gt;% 
  summarize(Count = n())</code></pre>
<pre><code>## # A tibble: 4 x 2
##      hp Count
##   &lt;dbl&gt; &lt;int&gt;
## 1   105     1
## 2   110     3
## 3   123     2
## 4   175     1</code></pre>
</div>
<div id="put-it-all-together" class="section level3">
<h3>Put it all together</h3>
<pre class="r"><code>cars %&gt;% 
  filter(cyl &gt;= 4, cyl &lt;= 6) %&gt;% 
  select(makeModel, mpg:wt) %&gt;%
  mutate(dispWt = disp / wt) %&gt;% 
  arrange(desc(mpg), wt)</code></pre>
<pre><code>## # A tibble: 18 x 8
##         makeModel   mpg   cyl  disp    hp  drat    wt   dispWt
##             &lt;chr&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt; &lt;dbl&gt;    &lt;dbl&gt;
##  1 Toyota Corolla  33.9     4  71.1    65  4.22 1.835 38.74659
##  2       Fiat 128  32.4     4  78.7    66  4.08 2.200 35.77273
##  3   Lotus Europa  30.4     4  95.1   113  3.77 1.513 62.85525
##  4    Honda Civic  30.4     4  75.7    52  4.93 1.615 46.87307
##  5      Fiat X1-9  27.3     4  79.0    66  4.08 1.935 40.82687
##  6  Porsche 914-2  26.0     4 120.3    91  4.43 2.140 56.21495
##  7      Merc 240D  24.4     4 146.7    62  3.69 3.190 45.98746
##  8     Datsun 710  22.8     4 108.0    93  3.85 2.320 46.55172
##  9       Merc 230  22.8     4 140.8    95  3.92 3.150 44.69841
## 10  Toyota Corona  21.5     4 120.1    97  3.70 2.465 48.72211
## 11     Volvo 142E  21.4     4 121.0   109  4.11 2.780 43.52518
## 12 Hornet 4 Drive  21.4     6 258.0   110  3.08 3.215 80.24883
## 13      Mazda RX4  21.0     6 160.0   110  3.90 2.620 61.06870
## 14  Mazda RX4 Wag  21.0     6 160.0   110  3.90 2.875 55.65217
## 15   Ferrari Dino  19.7     6 145.0   175  3.62 2.770 52.34657
## 16       Merc 280  19.2     6 167.6   123  3.92 3.440 48.72093
## 17        Valiant  18.1     6 225.0   105  2.76 3.460 65.02890
## 18      Merc 280C  17.8     6 167.6   123  3.92 3.440 48.72093</code></pre>
</div>
</div>
<div id="exercise-part-2-joel" class="section level2">
<h2>EXERCISE, Part 2 (Joel)</h2>
<ol start="2" style="list-style-type: decimal">
<li><p>Student_Assignments.Rmd::PART TWO <strong>Data Management</strong></p></li>
<li><code>arrange()</code></li>
<li><code>filter()</code></li>
<li><code>mutate()</code></li>
<li><code>select()</code></li>
<li><p><code>count()</code></p></li>
</ol>
</div>
<div id="visualization-with-ggvis-john" class="section level2">
<h2>Visualization with ggvis (John)</h2>
<p>When in the data exploratory phase, you can quickly generate very basic visualizations with minimal effort. Your visualizations then appear in the Viewer Pane.</p>
<div id="scatter-plot" class="section level3">
<h3>Scatter Plot</h3>
<p>Linear model and 95% confidence interval</p>
<pre class="r"><code>cars %&gt;% 
  ggvis(~wt, ~mpg) %&gt;% 
  layer_points() %&gt;% 
  layer_model_predictions(model = &quot;lm&quot;, se=TRUE)</code></pre>
<pre><code>## Guessing formula = mpg ~ wt</code></pre>
<p><div id="plot_id910345287-container" class="ggvis-output-container">
<div id="plot_id910345287" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id910345287_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id910345287" data-renderer="svg">SVG</a>
 | 
<a id="plot_id910345287_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id910345287" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id910345287_download" class="ggvis-download" data-plot-id="plot_id910345287">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id910345287_spec = {
  "data": [
    {
      "name": ".0",
      "format": {
        "type": "csv",
        "parse": {
          "wt": "number",
          "mpg": "number"
        }
      },
      "values": "\"wt\",\"mpg\"\n2.62,21\n2.875,21\n2.32,22.8\n3.215,21.4\n3.44,18.7\n3.46,18.1\n3.57,14.3\n3.19,24.4\n3.15,22.8\n3.44,19.2\n3.44,17.8\n4.07,16.4\n3.73,17.3\n3.78,15.2\n5.25,10.4\n5.424,10.4\n5.345,14.7\n2.2,32.4\n1.615,30.4\n1.835,33.9\n2.465,21.5\n3.52,15.5\n3.435,15.2\n3.84,13.3\n3.845,19.2\n1.935,27.3\n2.14,26\n1.513,30.4\n3.17,15.8\n2.77,19.7\n3.57,15\n2.78,21.4"
    },
    {
      "name": ".0/model_prediction1",
      "format": {
        "type": "csv",
        "parse": {
          "resp_upr_": "number",
          "pred_": "number",
          "resp_lwr_": "number",
          "resp_": "number"
        }
      },
      "values": "\"resp_upr_\",\"pred_\",\"resp_lwr_\",\"resp_\"\n31.4341217313206,1.513,26.9637596243046,29.1989406778126\n31.1204993874088,1.56250632911392,26.748211630978,28.9343555091934\n30.8072470380303,1.61201265822785,26.532293643118,28.6697703405742\n30.4943905399572,1.66151898734177,26.3159798039527,28.4051851719549\n30.1819579750846,1.7110253164557,26.0992420315869,28.1406000033357\n29.8699798618842,1.76053164556962,25.8820498075489,27.8760148347165\n29.5584893857579,1.81003797468354,25.6643699464367,27.6114296660973\n29.2475226490581,1.85954430379747,25.4461663458981,27.3468444974781\n28.9371189411946,1.90905063291139,25.2273997165231,27.0822593288588\n28.6273210287383,1.95855696202532,25.0080272917409,26.8176741602396\n28.3181754647066,2.00806329113924,24.7880025185342,26.5530889916204\n28.0097329152165,2.05756962025316,24.5672747307859,26.2885038230012\n27.7020485003464,2.10707594936709,24.3457888084175,26.023918654382\n27.3951821442752,2.15658227848101,24.1234848272503,25.7593334857627\n27.0891989274822,2.20608860759494,23.9002977068049,25.4947483171435\n26.7841694309033,2.25559493670886,23.6761568661453,25.2301631485243\n26.4801700583702,2.30510126582278,23.4509859014399,24.9655779799051\n26.1772833193625,2.35460759493671,23.2247023032092,24.7009928112859\n25.8755980490886,2.40411392405063,22.9972172362447,24.4364076426666\n25.5752095372801,2.45362025316456,22.7684354108148,24.1718224740474\n25.276219531088,2.50312658227848,22.5382550797684,23.9072373054282\n24.9787360715631,2.55263291139241,22.3065682020549,23.642652136809\n24.6828731181045,2.60213924050633,22.073260818275,23.3780669681898\n24.3887499120139,2.65164556962025,21.8382136871272,23.1134817995705\n24.096490030255,2.70115189873418,21.6013032316477,22.8488966309513\n23.8062200853351,2.7506582278481,21.3624028393291,22.5843114623321\n23.5180680386105,2.80016455696203,21.1213845488153,22.3197262937129\n23.2321611137817,2.84967088607595,20.8781211364057,22.0551411250937\n22.9486233256676,2.89917721518987,20.6324885872813,21.7905559564744\n22.6675726760022,2.9486835443038,20.3843688997083,21.5259707878552\n22.3891181105935,2.99818987341772,20.1336531278785,21.261385619236\n22.1133563760938,3.04769620253165,19.8802445251398,20.9968004506168\n21.8403689531932,3.09720253164557,19.624061610802,20.7322152819976\n21.5702192684414,3.14670886075949,19.3650409583153,20.4676301133783\n21.3029503917649,3.19621518987342,19.1031394977534,20.2030449447591\n21.0385834062175,3.24572151898734,18.8383361460623,19.9384597761399\n20.7771165901197,3.29522784810127,18.5706326249216,19.6738746075207\n20.5185254843377,3.34473417721519,18.3000533934652,19.4092894389015\n20.2627638386563,3.39424050632911,18.0266447019082,19.1447042702822\n20.0097653533643,3.44374683544304,17.7504728499618,18.880119101663\n19.7594460674074,3.49325316455696,17.4716217986802,18.6155339330438\n19.5117072017912,3.54275949367089,17.190190327058,18.3509487644246\n19.266438250352,3.59226582278481,16.9062889412588,18.0863635958054\n19.023520118358,3.64177215189873,16.6200367360143,17.8217784271861\n18.7828281372767,3.69127848101266,16.3315583798572,17.5571932585669\n18.5442348238948,3.74078481012658,16.0409813560006,17.2926080899477\n18.307612296075,3.79029113924051,15.748433546582,17.0280229213285\n18.0728342993708,3.83979746835443,15.4540412060478,16.7634377527093\n17.8397778342311,3.88930379746835,15.157927333949,16.49885258409\n17.6083244005099,3.93881012658228,14.8602104304317,16.2342674154708\n17.3783608941716,3.9883164556962,14.5610035995316,15.9696822468516\n17.1497802013801,4.03782278481013,14.2604139550846,15.7050970782324\n16.9224815391307,4.08732911392405,13.9585422800956,15.4405119096132\n16.6963705909696,4.13683544303798,13.6554828910183,15.1759267409939\n16.4713594827389,4.1863417721519,13.3513236620105,14.9113415723747\n16.2473666380091,4.23584810126582,13.0461461695019,14.6467564037555\n16.0243165469005,4.28535443037975,12.740025923372,14.3821712351363\n15.8021394760335,4.33486075949367,12.4330326570007,14.1175860665171\n15.5807711417929,4.3843670886076,12.1252306540028,13.8530008978978\n15.3601523641871,4.43387341772152,11.8166790943701,13.5884157292786\n15.1402287143902,4.48337974683544,11.5074324069286,13.3238305606594\n14.9209501655981,4.53288607594937,11.1975406184823,13.0592453920402\n14.7022707540356,4.58239240506329,10.8870496928064,12.794660223421\n14.4841482547477,4.63189873417722,10.5760018548558,12.5300750548017\n14.266543875108,4.68140506329114,10.2644358972571,12.2654898861825\n14.0494219676868,4.73091139240506,9.95238746743981,12.0009047175633\n13.8327497631713,4.78041772151899,9.6398893347169,11.7363195489441\n13.6164971233358,4.82992405063291,9.32697163731397,11.4717343803249\n13.400636313583,4.87943037974684,9.01366210982825,11.2071492117056\n13.185141794249,4.92893670886076,8.69998629192387,10.9425640430864\n12.96999002966,4.97844303797468,8.38596771927446,10.6779788744672\n12.7551593138153,5.02794936708861,8.07162809788066,10.413393705848\n12.5406296115153,5.07745569620253,7.75698746294225,10.1488085372288\n12.3263824137488,5.12696202531646,7.44206432347029,9.88422336860955\n12.1124006061819,5.17646835443038,7.1268757937988,9.61963819999033\n11.8986683496337,5.2259746835443,6.81143771310854,9.35505303137111\n11.685170971489,5.27548101265823,6.49576475401476,9.09046786275189\n11.4718948670624,5.32498734177215,6.17987052120298,8.82588269413267\n11.2588274100015,5.37449367088608,5.86376764102542,8.56129752551345\n11.0459568708893,5.424,5.5474678428992,8.29671235689423"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n1.31745\n5.61955"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n4.12984123504415\n35.317626607855"
    }
  ],
  "scales": [
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "symbol",
      "properties": {
        "update": {
          "fill": {
            "value": "#000000"
          },
          "size": {
            "value": 50
          },
          "x": {
            "scale": "x",
            "field": "data.wt"
          },
          "y": {
            "scale": "y",
            "field": "data.mpg"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0"
          }
        }
      },
      "from": {
        "data": ".0"
      }
    },
    {
      "type": "area",
      "properties": {
        "update": {
          "fill": {
            "value": "#333333"
          },
          "y2": {
            "scale": "y",
            "field": "data.resp_upr_"
          },
          "fillOpacity": {
            "value": 0.2
          },
          "x": {
            "scale": "x",
            "field": "data.pred_"
          },
          "y": {
            "scale": "y",
            "field": "data.resp_lwr_"
          },
          "stroke": {
            "value": "transparent"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0/model_prediction1"
          }
        }
      },
      "from": {
        "data": ".0/model_prediction1"
      }
    },
    {
      "type": "line",
      "properties": {
        "update": {
          "stroke": {
            "value": "#000000"
          },
          "strokeWidth": {
            "value": 2
          },
          "x": {
            "scale": "x",
            "field": "data.pred_"
          },
          "y": {
            "scale": "y",
            "field": "data.resp_"
          },
          "fill": {
            "value": "transparent"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0/model_prediction1"
          }
        }
      },
      "from": {
        "data": ".0/model_prediction1"
      }
    }
  ],
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "wt"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "mpg"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 672,
    "height": 480
  },
  "handlers": null
};
ggvis.getPlot("plot_id910345287").parseSpec(plot_id910345287_spec);
</script> <a href="http://ggvis.rstudio.com/cookbook.html#scatterplots">More information on ggvis scatterplots</a></p>
</div>
<div id="bar-graph" class="section level3">
<h3>Bar Graph</h3>
<pre class="r"><code>cars %&gt;% 
  mutate(cyl = factor(cyl, labels = c(&quot;four&quot;,&quot;six&quot;,&quot;eight&quot;))) %&gt;% 
  ggvis(~cyl) %&gt;% 
  layer_bars()</code></pre>
<p><div id="plot_id692932650-container" class="ggvis-output-container">
<div id="plot_id692932650" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id692932650_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id692932650" data-renderer="svg">SVG</a>
 | 
<a id="plot_id692932650_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id692932650" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id692932650_download" class="ggvis-download" data-plot-id="plot_id692932650">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id692932650_spec = {
  "data": [
    {
      "name": ".0/count1/stack2",
      "format": {
        "type": "csv",
        "parse": {
          "stack_lwr_": "number",
          "stack_upr_": "number"
        }
      },
      "values": "\"x_\",\"stack_lwr_\",\"stack_upr_\"\n\"four\",0,11\n\"six\",0,7\n\"eight\",0,14"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {}
      },
      "values": "\"domain\"\n\"four\"\n\"six\"\n\"eight\""
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n0\n14.7"
    }
  ],
  "scales": [
    {
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "name": "x",
      "type": "ordinal",
      "points": false,
      "padding": 0.1,
      "sort": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "rect",
      "properties": {
        "update": {
          "stroke": {
            "value": "#000000"
          },
          "fill": {
            "value": "#333333"
          },
          "x": {
            "scale": "x",
            "field": "data.x_"
          },
          "y": {
            "scale": "y",
            "field": "data.stack_lwr_"
          },
          "y2": {
            "scale": "y",
            "field": "data.stack_upr_"
          },
          "width": {
            "scale": "x",
            "band": true
          }
        },
        "ggvis": {
          "data": {
            "value": ".0/count1/stack2"
          }
        }
      },
      "from": {
        "data": ".0/count1/stack2"
      }
    }
  ],
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "cyl"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "count"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 672,
    "height": 480
  },
  "handlers": null
};
ggvis.getPlot("plot_id692932650").parseSpec(plot_id692932650_spec);
</script> <a href="http://ggvis.rstudio.com/cookbook.html#bar-graphs">More information on ggvis bar graphs</a></p>
</div>
<div id="histogram" class="section level3">
<h3>Histogram</h3>
<pre class="r"><code>cars %&gt;% 
  ggvis(~mpg) %&gt;% 
  layer_histograms()</code></pre>
<p><div id="plot_id512330044-container" class="ggvis-output-container">
<div id="plot_id512330044" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id512330044_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id512330044" data-renderer="svg">SVG</a>
 | 
<a id="plot_id512330044_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id512330044" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id512330044_download" class="ggvis-download" data-plot-id="plot_id512330044">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id512330044_spec = {
  "data": [
    {
      "name": ".0/bin1/stack2",
      "format": {
        "type": "csv",
        "parse": {
          "xmin_": "number",
          "xmax_": "number",
          "stack_upr_": "number",
          "stack_lwr_": "number"
        }
      },
      "values": "\"xmin_\",\"xmax_\",\"stack_upr_\",\"stack_lwr_\"\n9.5,10.5,2,0\n10.5,11.5,0,0\n11.5,12.5,0,0\n12.5,13.5,1,0\n13.5,14.5,1,0\n14.5,15.5,5,0\n15.5,16.5,2,0\n16.5,17.5,1,0\n17.5,18.5,2,0\n18.5,19.5,3,0\n19.5,20.5,1,0\n20.5,21.5,5,0\n21.5,22.5,0,0\n22.5,23.5,2,0\n23.5,24.5,1,0\n24.5,25.5,0,0\n25.5,26.5,1,0\n26.5,27.5,1,0\n27.5,28.5,0,0\n28.5,29.5,0,0\n29.5,30.5,2,0\n30.5,31.5,0,0\n31.5,32.5,1,0\n32.5,33.5,0,0\n33.5,34.5,1,0"
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n8.25\n35.75"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n0\n5.25"
    }
  ],
  "scales": [
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "rect",
      "properties": {
        "update": {
          "stroke": {
            "value": "#000000"
          },
          "fill": {
            "value": "#333333"
          },
          "x": {
            "scale": "x",
            "field": "data.xmin_"
          },
          "x2": {
            "scale": "x",
            "field": "data.xmax_"
          },
          "y": {
            "scale": "y",
            "field": "data.stack_upr_"
          },
          "y2": {
            "scale": "y",
            "field": "data.stack_lwr_"
          }
        },
        "ggvis": {
          "data": {
            "value": ".0/bin1/stack2"
          }
        }
      },
      "from": {
        "data": ".0/bin1/stack2"
      }
    }
  ],
  "legends": [],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "mpg"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "count"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 672,
    "height": 480
  },
  "handlers": null
};
ggvis.getPlot("plot_id512330044").parseSpec(plot_id512330044_spec);
</script> <a href="http://ggvis.rstudio.com/cookbook.html#histograms">More information on ggvis histograms</a></p>
</div>
<div id="line-graph" class="section level3">
<h3>Line graph</h3>
<pre class="r"><code>cars %&gt;% 
  ggvis( ~wt, ~mpg) %&gt;% 
  group_by(cyl) %&gt;% 
  layer_lines(stroke = ~factor(cyl)) %&gt;% 
  layer_points(~wt, ~mpg, stroke := &quot;black&quot;, fill = ~factor(cyl))</code></pre>
<p><div id="plot_id714732502-container" class="ggvis-output-container">
<div id="plot_id714732502" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id714732502_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id714732502" data-renderer="svg">SVG</a>
 | 
<a id="plot_id714732502_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id714732502" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id714732502_download" class="ggvis-download" data-plot-id="plot_id714732502">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id714732502_spec = {
  "data": [
    {
      "name": ".0/group_by1_flat",
      "format": {
        "type": "csv",
        "parse": {
          "cyl": "number",
          "wt": "number",
          "mpg": "number"
        }
      },
      "values": "\"cyl\",\"factor(cyl)\",\"wt\",\"mpg\"\n4,\"4\",2.32,22.8\n4,\"4\",3.19,24.4\n4,\"4\",3.15,22.8\n4,\"4\",2.2,32.4\n4,\"4\",1.615,30.4\n4,\"4\",1.835,33.9\n4,\"4\",2.465,21.5\n4,\"4\",1.935,27.3\n4,\"4\",2.14,26\n4,\"4\",1.513,30.4\n4,\"4\",2.78,21.4\n6,\"6\",2.62,21\n6,\"6\",2.875,21\n6,\"6\",3.215,21.4\n6,\"6\",3.46,18.1\n6,\"6\",3.44,19.2\n6,\"6\",3.44,17.8\n6,\"6\",2.77,19.7\n8,\"8\",3.44,18.7\n8,\"8\",3.57,14.3\n8,\"8\",4.07,16.4\n8,\"8\",3.73,17.3\n8,\"8\",3.78,15.2\n8,\"8\",5.25,10.4\n8,\"8\",5.424,10.4\n8,\"8\",5.345,14.7\n8,\"8\",3.52,15.5\n8,\"8\",3.435,15.2\n8,\"8\",3.84,13.3\n8,\"8\",3.845,19.2\n8,\"8\",3.17,15.8\n8,\"8\",3.57,15"
    },
    {
      "name": ".0/group_by1",
      "source": ".0/group_by1_flat",
      "transform": [
        {
          "type": "treefacet",
          "keys": [
            "data.cyl"
          ]
        }
      ]
    },
    {
      "name": ".0/group_by1/arrange2_flat",
      "format": {
        "type": "csv",
        "parse": {
          "cyl": "number",
          "wt": "number",
          "mpg": "number"
        }
      },
      "values": "\"cyl\",\"wt\",\"mpg\",\"factor(cyl)\"\n4,1.513,30.4,\"4\"\n4,1.615,30.4,\"4\"\n4,1.835,33.9,\"4\"\n4,1.935,27.3,\"4\"\n4,2.14,26,\"4\"\n4,2.2,32.4,\"4\"\n4,2.32,22.8,\"4\"\n4,2.465,21.5,\"4\"\n4,2.78,21.4,\"4\"\n4,3.15,22.8,\"4\"\n4,3.19,24.4,\"4\"\n6,2.62,21,\"6\"\n6,2.77,19.7,\"6\"\n6,2.875,21,\"6\"\n6,3.215,21.4,\"6\"\n6,3.44,19.2,\"6\"\n6,3.44,17.8,\"6\"\n6,3.46,18.1,\"6\"\n8,3.17,15.8,\"8\"\n8,3.435,15.2,\"8\"\n8,3.44,18.7,\"8\"\n8,3.52,15.5,\"8\"\n8,3.57,14.3,\"8\"\n8,3.57,15,\"8\"\n8,3.73,17.3,\"8\"\n8,3.78,15.2,\"8\"\n8,3.84,13.3,\"8\"\n8,3.845,19.2,\"8\"\n8,4.07,16.4,\"8\"\n8,5.25,10.4,\"8\"\n8,5.345,14.7,\"8\"\n8,5.424,10.4,\"8\""
    },
    {
      "name": ".0/group_by1/arrange2",
      "source": ".0/group_by1/arrange2_flat",
      "transform": [
        {
          "type": "treefacet",
          "keys": [
            "data.cyl"
          ]
        }
      ]
    },
    {
      "name": "scale/fill",
      "format": {
        "type": "csv",
        "parse": {}
      },
      "values": "\"domain\"\n\"4\"\n\"6\"\n\"8\""
    },
    {
      "name": "scale/stroke",
      "format": {
        "type": "csv",
        "parse": {}
      },
      "values": "\"domain\"\n\"4\"\n\"6\"\n\"8\""
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n1.31745\n5.61955"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n9.225\n35.075"
    }
  ],
  "scales": [
    {
      "name": "fill",
      "type": "ordinal",
      "domain": {
        "data": "scale/fill",
        "field": "data.domain"
      },
      "points": true,
      "sort": false,
      "range": "category10"
    },
    {
      "name": "stroke",
      "type": "ordinal",
      "domain": {
        "data": "scale/stroke",
        "field": "data.domain"
      },
      "points": true,
      "sort": false,
      "range": "category10"
    },
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "group",
      "from": {
        "data": ".0/group_by1/arrange2"
      },
      "marks": [
        {
          "type": "line",
          "properties": {
            "update": {
              "x": {
                "scale": "x",
                "field": "data.wt"
              },
              "y": {
                "scale": "y",
                "field": "data.mpg"
              },
              "stroke": {
                "scale": "stroke",
                "field": "data.factor(cyl)"
              }
            },
            "ggvis": {
              "data": {
                "value": ".0/group_by1/arrange2"
              }
            }
          }
        }
      ]
    },
    {
      "type": "group",
      "from": {
        "data": ".0/group_by1"
      },
      "marks": [
        {
          "type": "symbol",
          "properties": {
            "update": {
              "size": {
                "value": 50
              },
              "fill": {
                "scale": "fill",
                "field": "data.factor(cyl)"
              },
              "stroke": {
                "value": "black"
              },
              "x": {
                "scale": "x",
                "field": "data.wt"
              },
              "y": {
                "scale": "y",
                "field": "data.mpg"
              }
            },
            "ggvis": {
              "data": {
                "value": ".0/group_by1"
              }
            }
          }
        }
      ]
    }
  ],
  "legends": [
    {
      "orient": "right",
      "fill": "fill",
      "title": "factor(cyl)"
    },
    {
      "orient": "right",
      "stroke": "stroke",
      "title": "factor(cyl)"
    }
  ],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "wt"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "mpg"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 672,
    "height": 480
  },
  "handlers": null
};
ggvis.getPlot("plot_id714732502").parseSpec(plot_id714732502_spec);
</script> <a href="http://ggvis.rstudio.com/cookbook.html#line-graphs">More information on line graphs</a></p>
<pre class="r"><code>cars %&gt;% 
  ggvis(~wt, ~mpg) %&gt;% 
  group_by(cyl) %&gt;% 
  layer_model_predictions(model=&quot;lm&quot;, se = TRUE) %&gt;% 
  layer_points(~wt, ~mpg, stroke := &quot;black&quot;, fill = ~factor(cyl), size := ~hp, opacity := 0.7) </code></pre>
<div id="plot_id211554054-container" class="ggvis-output-container">
<div id="plot_id211554054" class="ggvis-output"></div>
<div class="plot-gear-icon">
<nav class="ggvis-control">
<a class="ggvis-dropdown-toggle" title="Controls" onclick="return false;"></a>
<ul class="ggvis-dropdown">
<li>
Renderer: 
<a id="plot_id211554054_renderer_svg" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id211554054" data-renderer="svg">SVG</a>
 | 
<a id="plot_id211554054_renderer_canvas" class="ggvis-renderer-button" onclick="return false;" data-plot-id="plot_id211554054" data-renderer="canvas">Canvas</a>
</li>
<li>
<a id="plot_id211554054_download" class="ggvis-download" data-plot-id="plot_id211554054">Download</a>
</li>
</ul>
</nav>
</div>
</div>
<script type="text/javascript">
var plot_id211554054_spec = {
  "data": [
    {
      "name": ".0/group_by1_flat",
      "format": {
        "type": "csv",
        "parse": {
          "cyl": "number",
          "hp": "number",
          "wt": "number",
          "mpg": "number"
        }
      },
      "values": "\"cyl\",\"factor(cyl)\",\"hp\",\"wt\",\"mpg\"\n4,\"4\",93,2.32,22.8\n4,\"4\",62,3.19,24.4\n4,\"4\",95,3.15,22.8\n4,\"4\",66,2.2,32.4\n4,\"4\",52,1.615,30.4\n4,\"4\",65,1.835,33.9\n4,\"4\",97,2.465,21.5\n4,\"4\",66,1.935,27.3\n4,\"4\",91,2.14,26\n4,\"4\",113,1.513,30.4\n4,\"4\",109,2.78,21.4\n6,\"6\",110,2.62,21\n6,\"6\",110,2.875,21\n6,\"6\",110,3.215,21.4\n6,\"6\",105,3.46,18.1\n6,\"6\",123,3.44,19.2\n6,\"6\",123,3.44,17.8\n6,\"6\",175,2.77,19.7\n8,\"8\",175,3.44,18.7\n8,\"8\",245,3.57,14.3\n8,\"8\",180,4.07,16.4\n8,\"8\",180,3.73,17.3\n8,\"8\",180,3.78,15.2\n8,\"8\",205,5.25,10.4\n8,\"8\",215,5.424,10.4\n8,\"8\",230,5.345,14.7\n8,\"8\",150,3.52,15.5\n8,\"8\",150,3.435,15.2\n8,\"8\",245,3.84,13.3\n8,\"8\",175,3.845,19.2\n8,\"8\",264,3.17,15.8\n8,\"8\",335,3.57,15"
    },
    {
      "name": ".0/group_by1",
      "source": ".0/group_by1_flat",
      "transform": [
        {
          "type": "treefacet",
          "keys": [
            "data.cyl"
          ]
        }
      ]
    },
    {
      "name": ".0/group_by1/model_prediction2_flat",
      "format": {
        "type": "csv",
        "parse": {
          "cyl": "number",
          "resp_upr_": "number",
          "pred_": "number",
          "resp_lwr_": "number",
          "resp_": "number"
        }
      },
      "values": "\"cyl\",\"resp_upr_\",\"pred_\",\"resp_lwr_\",\"resp_\"\n4,34.9800883018005,1.513,27.0744052837557,31.0272467927781\n4,34.7878615744043,1.53422784810127,27.0268836222127,30.9073725983085\n4,34.5963328605434,1.55545569620253,26.9786639471342,30.7874984038388\n4,34.4055423024242,1.5766835443038,26.9297061163141,30.6676242093691\n4,34.2155327168905,1.59791139240506,26.8799673129085,30.5477500148995\n4,34.0263497684374,1.61913924050633,26.8294018724222,30.4278758204298\n4,33.8380421479348,1.64036708860759,26.7779611039855,30.3080016259602\n4,33.6506617556389,1.66159493670886,26.7255931073421,30.1881274314905\n4,33.4642638865707,1.68282278481013,26.6722425874709,30.0682532370208\n4,33.278907415743,1.70405063291139,26.6178506693593,29.9483790425512\n4,33.094654980002,1.72527848101266,26.562354716161,29.8285048480815\n4,32.9115731524215,1.74650632911392,26.5056881548022,29.7086306536118\n4,32.7297326042198,1.76773417721519,26.4477803140646,29.5887564591422\n4,32.5492082480776,1.78896202531646,26.3885562812674,29.4688822646725\n4,32.3700793555192,1.81018987341772,26.3279367848865,29.3490080702029\n4,32.1924296396951,1.83141772151899,26.2658381117713,29.2291338757332\n4,32.016347293513,1.85264556962025,26.2021720690141,29.1092596812635\n4,31.8419249716569,1.87387341772152,26.1368460019308,28.9893854867939\n4,31.6692597036891,1.89510126582278,26.0697628809594,28.8695112923242\n4,31.4984527242664,1.91632911392405,26.0008214714427,28.7496370978545\n4,31.3296092056584,1.93755696202532,25.9299166011113,28.6297629033849\n4,31.1628378774112,1.95878481012658,25.8569395404193,28.5098887089152\n4,30.9982505183714,1.98001265822785,25.7817785105198,28.3900145144456\n4,30.8359613076045,2.00124050632911,25.7043193323473,28.2701403199759\n4,30.6760860232353,2.02246835443038,25.6244462277772,28.1502661255062\n4,30.5187410821409,2.04369620253165,25.5420427799323,28.0303919310366\n4,30.3640424188694,2.06492405063291,25.4569930542644,27.9105177365669\n4,30.2121042092076,2.08615189873418,25.3691828749869,27.7906435420973\n4,30.0630374523529,2.10737974683544,25.2785012429023,27.6707693476276\n4,29.9169484353639,2.12860759493671,25.1848418709519,27.5508951531579\n4,29.7739371139142,2.14983544303797,25.0881048034624,27.4310209586883\n4,29.6340954535847,2.17106329113924,24.9881980748525,27.3111467642186\n4,29.49750578503,2.19229113924051,24.8850393544679,27.1912725697489\n4,29.3642392332396,2.21351898734177,24.778557517319,27.0713983752793\n4,29.2343542847436,2.23474683544304,24.6686940768756,26.9515241808096\n4,29.1078955560778,2.2559746835443,24.5554044166022,26.83164998634\n4,28.9848928216124,2.27720253164557,24.4386587621282,26.7117757918703\n4,28.8653603489254,2.29843037974684,24.3184428458759,26.5919015974006\n4,28.7492965757988,2.3196582278481,24.1947582300632,26.472027402931\n4,28.6366841457288,2.34088607594937,24.0676222711938,26.3521532084613\n4,28.5274903000826,2.36211392405063,23.9370677279007,26.2322790139917\n4,28.4216676064509,2.3833417721519,23.8031420325931,26.112404819522\n4,28.3191549860566,2.40456962025316,23.665906264048,25.9925306250523\n4,28.2198789897303,2.42579746835443,23.5254338714351,25.8726564305827\n4,28.1237552629424,2.4470253164557,23.3818092092836,25.752782236113\n4,28.0306901361137,2.46825316455696,23.235125947173,25.6329080416433\n4,27.9405822767629,2.48948101265823,23.0854854175844,25.5130338471737\n4,27.8533243444002,2.51070886075949,22.9329949610078,25.393159652704\n4,27.7688045964828,2.53193670886076,22.7777663199859,25.2732854582344\n4,27.686908403153,2.55316455696203,22.6199141243764,25.1534112637647\n4,27.6075196387857,2.57439240506329,22.4595544998043,25.033537069295\n4,27.5305219286576,2.59562025316456,22.2968038209931,24.9136628748254\n4,27.455799738566,2.61684810126582,22.1317776221454,24.7937886803557\n4,27.3832393034878,2.63807594936709,21.9645896682843,24.673914485886\n4,27.312729398101,2.65930379746835,21.7953511847317,24.5540402914164\n4,27.2441619571281,2.68053164556962,21.6241702367653,24.4341660969467\n4,27.1774325570663,2.70175949367089,21.4511512478878,24.3142919024771\n4,27.1124407731176,2.72298734177215,21.2763946428972,24.1944177080074\n4,27.0490904262451,2.74421518987342,21.0999966008303,24.0745435135377\n4,26.9872897354914,2.76544303797468,20.9220489026447,23.9546693190681\n4,26.9269513902401,2.78667088607595,20.7426388589567,23.8347951245984\n4,26.8679925561809,2.80789873417721,20.5618493040766,23.7149209301288\n4,26.8103348275276,2.82912658227848,20.3797586437906,23.5950467356591\n4,26.7539041366752,2.85035443037975,20.1964409457036,23.4751725411894\n4,26.6986306310718,2.87158227848101,20.0119660623677,23.3552983467198\n4,26.6444485256997,2.89281012658228,19.8263997788006,23.2354241522501\n4,26.5912959382549,2.91403797468354,19.639803977306,23.1155499577804\n4,26.5391147129223,2.93526582278481,19.4522368136993,22.9956757633108\n4,26.4878502375736,2.95649367088608,19.2637529001086,22.8758015688411\n4,26.43745125828,2.97772151898734,19.0744034904629,22.7559273743715\n4,26.3878696942205,2.99894936708861,18.8842366655831,22.6360531799018\n4,26.3390604553797,3.02017721518987,18.6932975154845,22.5161789854321\n4,26.2909812648498,3.04140506329114,18.5016283170751,22.3963047909625\n4,26.2435924870719,3.0626329113924,18.3092687059137,22.2764305964928\n4,26.1968569629596,3.08386075949367,18.1162558410868,22.1565564020232\n4,26.1507398525278,3.10508860759494,17.9226245625792,22.0366822075535\n4,26.1052084853965,3.1263164556962,17.7284075407712,21.9168080130838\n4,26.0602322193357,3.14754430379747,17.5336354178926,21.7969338186142\n4,26.0157823068645,3.16877215189873,17.3383369414245,21.6770596241445\n4,25.9718317697946,3.19,17.1425390895551,21.5571854296748\n6,23.1723845745727,2.62,19.0775493306446,21.1249669526086\n6,23.1125231041877,2.6306329113924,19.0782895608045,21.0954063324961\n6,23.0528695730455,2.64126582278481,19.0788218517216,21.0658457123835\n6,22.993433572926,2.65189873417722,19.0791366116161,21.036285092271\n6,22.9342252187496,2.66253164556962,19.0792237255673,21.0067244721585\n6,22.8752551778727,2.67316455696203,19.0790725262192,20.9771638520459\n6,22.8165347005907,2.68379746835443,19.0786717632761,20.9476032319334\n6,22.7580756517921,2.69443037974684,19.0780095718497,20.9180426118209\n6,22.699890543671,2.70506329113924,19.0770734397456,20.8884819917083\n6,22.6419925693754,2.71569620253165,19.0758501738162,20.8589213715958\n6,22.5843956374238,2.72632911392405,19.0743258655427,20.8293607514833\n6,22.5271144066764,2.73696202531646,19.072485856065,20.7998001313707\n6,22.4701643215869,2.74759493670886,19.0703147009294,20.7702395112582\n6,22.4135616473952,2.75822784810127,19.0677961348961,20.7406788911456\n6,22.3573235048459,2.76886075949367,19.0649130372203,20.7111182710331\n6,22.3014679039278,2.77949367088608,19.0616473979134,20.6815576509206\n6,22.2460137760314,2.79012658227848,19.0579802855846,20.651997030808\n6,22.1909810038126,2.80075949367089,19.0538918175784,20.6224364106955\n6,22.1363904479253,2.81139240506329,19.0493611332406,20.592875790583\n6,22.0822639696583,2.8220253164557,19.0443663712825,20.5633151704704\n6,22.0286244483649,2.8326582278481,19.0388846523509,20.5337545503579\n6,21.9754957924307,2.84329113924051,19.03289206806,20.5041939302453\n6,21.9229029423707,2.85392405063291,19.026363677895,20.4746333101328\n6,21.870871864499,2.86455696202532,19.0192735155415,20.4450726900203\n6,21.8194295334774,2.87518987341772,19.0115946063381,20.4155120699077\n6,21.7686039019237,2.88582278481013,19.0032989976667,20.3859514497952\n6,21.7184238551734,2.89645569620253,18.9943578041919,20.3563908296827\n6,21.6689191492339,2.90708860759494,18.9847412699063,20.3268302095701\n6,21.6201203299789,2.91772151898734,18.9744188489363,20.2972695894576\n6,21.5720586317122,2.92835443037975,18.9633593069779,20.267708969345\n6,21.5247658533985,2.93898734177215,18.9515308450665,20.2381483492325\n6,21.4782742111402,2.94962025316456,18.9389012470997,20.20858772912\n6,21.432616165881,2.96025316455696,18.9254380521338,20.1790271090074\n6,21.3878242258559,2.97088607594937,18.9111087519339,20.1494664888949\n6,21.3439307239869,2.98151898734177,18.8958810135778,20.1199058687824\n6,21.3009675712443,2.99215189873418,18.8797229260953,20.0903452486698\n6,21.2589659879359,3.00278481012658,18.8626032691787,20.0607846285573\n6,21.2179562159366,3.01341772151899,18.8444918009529,20.0312240084447\n6,21.1779672159739,3.02405063291139,18.8253595606905,20.0016633883322\n6,21.1390263551952,3.0346835443038,18.8051791812441,19.9721027682197\n6,21.1011590912963,3.0453164556962,18.783925204918,19.9425421481071\n6,21.0643886603937,3.05594936708861,18.7615743955954,19.9129815279946\n6,21.0287357765203,3.06658227848101,18.7381060392438,19.8834209078821\n6,20.9942183510101,3.07721518987342,18.713502224529,19.8538602877695\n6,20.9608512400729,3.08784810126582,18.687748095241,19.824299667657\n6,20.9286460284799,3.09848101265823,18.660832066609,19.7947390475445\n6,20.8976108564787,3.10911392405063,18.6327459983851,19.7651784274319\n6,20.8677502958511,3.11974683544304,18.6034853187876,19.7356178073194\n6,20.8390652794599,3.13037974683544,18.5730490949538,19.7060571872068\n6,20.8115530867982,3.14101265822785,18.5414400473904,19.6764965670943\n6,20.785207386061,3.15164556962025,18.5086645079026,19.6469359469818\n6,20.7600183312298,3.16227848101266,18.4747323225087,19.6173753268692\n6,20.7359727107328,3.17291139240506,18.4396567027806,19.5878147067567\n6,20.7130541425258,3.18354430379747,18.4034540307625,19.5582540866442\n6,20.6912433090431,3.19417721518987,18.3661436240201,19.5286934665316\n6,20.6705182244534,3.20481012658228,18.3277474683848,19.4991328464191\n6,20.6508545260602,3.21544303797468,18.2882899265529,19.4695722263065\n6,20.6322257815163,3.22607594936709,18.2477974308717,19.440011606194\n6,20.6146038037327,3.23670886075949,18.2062981684303,19.4104509860815\n6,20.5979589659109,3.2473417721519,18.163821766027,19.3808903659689\n6,20.5822605099377,3.2579746835443,18.1203989817751,19.3513297458564\n6,20.5674768423646,3.26860759493671,18.0760614091232,19.3217691257439\n6,20.5535758132878,3.27924050632911,18.0308411979748,19.2922085056313\n6,20.5405249745576,3.28987341772152,17.9847707964799,19.2626478855188\n6,20.5282918148291,3.30050632911392,17.9378827159833,19.2330872654062\n6,20.5168439699684,3.31113924050633,17.890209320619,19.2035266452937\n6,20.5061494082127,3.32177215189873,17.8417826421496,19.1739660251812\n6,20.4961765902363,3.33240506329114,17.792634219901,19.1444054050686\n6,20.4868946048837,3.34303797468354,17.7427949650285,19.1148447849561\n6,20.4782732818028,3.35367088607595,17.6922950478843,19.0852841648436\n6,20.4702832825505,3.36430379746835,17.6411638069116,19.055723544731\n6,20.462896171969,3.37493670886076,17.589429677268,19.0261629246185\n6,20.4560844717538,3.38556962025316,17.5371201372581,18.9966023045059\n6,20.4498216981771,3.39620253164557,17.4842616706097,18.9670416843934\n6,20.4440823859077,3.40683544303797,17.430879742654,18.9374810642809\n6,20.4388420997957,3.41746835443038,17.376998788541,18.9079204441683\n6,20.4340774363812,3.42810126582278,17.3226422117304,18.8783598240558\n6,20.4297660167573,3.43873417721519,17.2678323911292,18.8487992039433\n6,20.4258864722709,3.44936708860759,17.2125906953905,18.8192385838307\n6,20.4224184243942,3.46,17.1569375030421,18.7896779637182\n8,18.6992958991983,3.17,15.1367057991096,16.9180008491539\n8,18.6025504459053,3.19853164556962,15.1083435287008,16.8554469873031\n8,18.5063553048496,3.22706329113924,15.0794309460548,16.7928931254522\n8,18.4107435277022,3.25559493670886,15.0499349995005,16.7303392636013\n8,18.315750221402,3.28412658227848,15.019820582099,16.6677854017505\n8,18.221412627596,3.3126582278481,14.9890504522032,16.6052315398996\n8,18.1277701911419,3.34118987341772,14.9575851649556,16.5426776780488\n8,18.0348646136681,3.36972151898734,14.9253830187278,16.4801238161979\n8,17.9427398874988,3.39825316455696,14.8924000211953,16.4175699543471\n8,17.851442304536,3.42678481012658,14.8585898804564,16.3550160924962\n8,17.761020433982,3.4553164556962,14.8239040273087,16.2924622306453\n8,17.6715250621331,3.48384810126582,14.7882916754559,16.2299083687945\n8,17.5830090869368,3.51237974683544,14.7516999269504,16.1673545069436\n8,17.495527359662,3.54091139240506,14.7140739305235,16.1048006450928\n8,17.4091364659871,3.56944303797468,14.6753571004967,16.0422467832419\n8,17.3238944391672,3.5979746835443,14.6354914036149,15.9796929213911\n8,17.2398603988275,3.62650632911392,14.5944177202529,15.9171390595402\n8,17.1570941104565,3.65503797468354,14.5520762849222,15.8545851976894\n8,17.0756554629441,3.68356962025316,14.5084072087328,15.7920313358385\n8,16.9956038645804,3.71210126582278,14.4633510833949,15.7294774739876\n8,16.9169975618057,3.7406329113924,14.4168496624679,15.6669236121368\n8,16.8398928895852,3.76916455696203,14.3688466109867,15.6043697502859\n8,16.7643434673734,3.79769620253165,14.3192883094967,15.5418158884351\n8,16.6903993599216,3.82622784810127,14.2681246932468,15.4792620265842\n8,16.6181062272256,3.85475949367089,14.2153101022411,15.4167081647334\n8,16.5475044921959,3.88329113924051,14.160804113569,15.3541543028825\n8,16.4786285576011,3.91182278481013,14.1045723244621,15.2916004410316\n8,16.4115061049729,3.94035443037975,14.0465870533887,15.2290465791808\n8,16.3461575070749,3.96888607594937,13.9868279275849,15.1664927173299\n8,16.2825953820421,3.99741772151899,13.9252823289161,15.1039388554791\n8,16.2208243114707,4.02594936708861,13.8619456757857,15.0413849936282\n8,16.1608407369642,4.05448101265823,13.7968215265906,14.9788311317774\n8,16.1026330405336,4.08301265822785,13.7299214993194,14.9162772699265\n8,16.0461818046536,4.11154430379747,13.6612650114977,14.8537234080756\n8,15.9914602385588,4.14007594936709,13.5908788538908,14.7911695462248\n8,15.9384347493815,4.16860759493671,13.5187966193663,14.7286156843739\n8,15.8870656306358,4.19713924050633,13.4450580144103,14.6660618225231\n8,15.8373078367516,4.22567088607595,13.3697080845928,14.6035079606722\n8,15.7891118109792,4.25420253164557,13.2927963866635,14.5409540988214\n8,15.7424243348589,4.28273417721519,13.2143761390822,14.4784002369705\n8,15.6971893702164,4.31126582278481,13.1345033800229,14.4158463751197\n8,15.6533488687944,4.33979746835443,13.0532361577432,14.3532925132688\n8,15.6108435296072,4.36832911392405,12.9706337732286,14.2907386514179\n8,15.5696134893919,4.39686075949367,12.8867560897423,14.2281847895671\n8,15.5295989366614,4.42539240506329,12.801662918771,14.1656309277162\n8,15.4907406445313,4.45392405063291,12.7154134871994,14.1030770658654\n8,15.4529804214564,4.48245569620253,12.6280659865726,14.0405232040145\n8,15.4162614821927,4.51098734177215,12.5396772021346,13.9779693421637\n8,15.3805287436658,4.53951898734177,12.4503022169598,13.9154154803128\n8,15.3457290520454,4.56805063291139,12.3599941848785,13.8528616184619\n8,15.3118113482838,4.59658227848101,12.2688041649384,13.7903077566111\n8,15.2787267797939,4.62511392405063,12.1767810097265,13.7277538947602\n8,15.2464287659408,4.65364556962025,12.0839712998779,13.6652000329094\n8,15.2148730247105,4.68217721518987,11.9904193174065,13.6026461710585\n8,15.1840175674012,4.71070886075949,11.8961670510141,13.5400923092077\n8,15.1538226675399,4.73924050632911,11.8012542271737,13.4775384473568\n8,15.1242508095215,4.76777215189873,11.7057183614904,13.4149845855059\n8,15.0952666217545,4.79630379746835,11.6095948255557,13.3524307236551\n8,15.0668367983996,4.82483544303797,11.5129169252088,13.2898768618042\n8,15.0389300131448,4.8533670886076,11.415715986762,13.2273229999534\n8,15.0115168278645,4.88189873417722,11.3180214483406,13.1647691381025\n8,14.9845695984917,4.91043037974684,11.2198609540116,13.1022152762517\n8,14.9580623799677,4.93896202531646,11.1212604488339,13.0396614144008\n8,14.9319708317432,4.96749367088608,11.0222442733567,12.97710755255\n8,14.9062721249679,4.9960253164557,10.9228352564302,12.9145536906991\n8,14.8809448522267,5.02455696202532,10.8230548054698,12.8519998288482\n8,14.8559689404472,5.05308860759494,10.7229229935476,12.7894459669974\n8,14.8313255674154,5.08162025316456,10.6224586428776,12.7268921051465\n8,14.8069970821816,5.11015189873418,10.5216794044097,12.6643382432957\n8,14.7829669295166,5.1386835443038,10.420601833373,12.6017843814448\n8,14.7592195784832,5.16721518987342,10.3192414607047,12.539230519594\n8,14.7357404551115,5.19574683544304,10.2176128603747,12.4766766577431\n8,14.7125158791116,5.22427848101266,10.1157297126729,12.4141227958922\n8,14.6895330045135,5.25281012658228,10.0136048635692,12.3515689340414\n8,14.6667797640944,5.2813417721519,9.91125038028669,12.2890150721905\n8,14.6442448174328,5.30987341772152,9.80867760324656,12.2264612103397\n8,14.6219175024161,5.33840506329114,9.70589719456153,12.1639073484888\n8,14.5997877900186,5.36693670886076,9.60291918325737,12.101353486638\n8,14.5778462421665,5.39546835443038,9.49975300740769,12.0387996247871\n8,14.5560839725069,5.424,9.3964075533656,11.9762457629362"
    },
    {
      "name": ".0/group_by1/model_prediction2",
      "source": ".0/group_by1/model_prediction2_flat",
      "transform": [
        {
          "type": "treefacet",
          "keys": [
            "data.cyl"
          ]
        }
      ]
    },
    {
      "name": "scale/fill",
      "format": {
        "type": "csv",
        "parse": {}
      },
      "values": "\"domain\"\n\"4\"\n\"6\"\n\"8\""
    },
    {
      "name": "scale/x",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n1.31745\n5.61955"
    },
    {
      "name": "scale/y",
      "format": {
        "type": "csv",
        "parse": {
          "domain": "number"
        }
      },
      "values": "\"domain\"\n8.11722351594386\n36.2592723392223"
    }
  ],
  "scales": [
    {
      "name": "fill",
      "type": "ordinal",
      "domain": {
        "data": "scale/fill",
        "field": "data.domain"
      },
      "points": true,
      "sort": false,
      "range": "category10"
    },
    {
      "name": "x",
      "domain": {
        "data": "scale/x",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "width"
    },
    {
      "name": "y",
      "domain": {
        "data": "scale/y",
        "field": "data.domain"
      },
      "zero": false,
      "nice": false,
      "clamp": false,
      "range": "height"
    }
  ],
  "marks": [
    {
      "type": "group",
      "from": {
        "data": ".0/group_by1/model_prediction2"
      },
      "marks": [
        {
          "type": "area",
          "properties": {
            "update": {
              "fill": {
                "value": "#333333"
              },
              "y2": {
                "scale": "y",
                "field": "data.resp_upr_"
              },
              "fillOpacity": {
                "value": 0.2
              },
              "x": {
                "scale": "x",
                "field": "data.pred_"
              },
              "y": {
                "scale": "y",
                "field": "data.resp_lwr_"
              },
              "stroke": {
                "value": "transparent"
              }
            },
            "ggvis": {
              "data": {
                "value": ".0/group_by1/model_prediction2"
              }
            }
          }
        }
      ]
    },
    {
      "type": "group",
      "from": {
        "data": ".0/group_by1/model_prediction2"
      },
      "marks": [
        {
          "type": "line",
          "properties": {
            "update": {
              "stroke": {
                "value": "#000000"
              },
              "strokeWidth": {
                "value": 2
              },
              "x": {
                "scale": "x",
                "field": "data.pred_"
              },
              "y": {
                "scale": "y",
                "field": "data.resp_"
              },
              "fill": {
                "value": "transparent"
              }
            },
            "ggvis": {
              "data": {
                "value": ".0/group_by1/model_prediction2"
              }
            }
          }
        }
      ]
    },
    {
      "type": "group",
      "from": {
        "data": ".0/group_by1"
      },
      "marks": [
        {
          "type": "symbol",
          "properties": {
            "update": {
              "fill": {
                "scale": "fill",
                "field": "data.factor(cyl)"
              },
              "stroke": {
                "value": "black"
              },
              "size": {
                "field": "data.hp"
              },
              "opacity": {
                "value": 0.7
              },
              "x": {
                "scale": "x",
                "field": "data.wt"
              },
              "y": {
                "scale": "y",
                "field": "data.mpg"
              }
            },
            "ggvis": {
              "data": {
                "value": ".0/group_by1"
              }
            }
          }
        }
      ]
    }
  ],
  "legends": [
    {
      "orient": "right",
      "fill": "fill",
      "title": "factor(cyl)"
    }
  ],
  "axes": [
    {
      "type": "x",
      "scale": "x",
      "orient": "bottom",
      "layer": "back",
      "grid": true,
      "title": "wt"
    },
    {
      "type": "y",
      "scale": "y",
      "orient": "left",
      "layer": "back",
      "grid": true,
      "title": "mpg"
    }
  ],
  "padding": null,
  "ggvis_opts": {
    "keep_aspect": false,
    "resizable": true,
    "padding": {},
    "duration": 250,
    "renderer": "svg",
    "hover_duration": 0,
    "width": 672,
    "height": 480
  },
  "handlers": null
};
ggvis.getPlot("plot_id211554054").parseSpec(plot_id211554054_spec);
</script>
<div id="shareable-under-cc-by-nc-license" class="section level4">
<h4>Shareable under CC BY-NC license</h4>
<p>Data, presentation, and handouts are shareable under <a href="https://creativecommons.org/licenses/by-nc/4.0/">CC BY-NC license</a></p>
<div class="figure">
<img src="https://licensebuttons.net/l/by-nc/4.0/88x31.png" title="This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License" alt="This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License." />
<p class="caption">This work is licensed under a Creative Commons Attribution-NonCommercial-ShareAlike 4.0 International License.</p>
</div>
</div>
</div>
</div>
</div>



</div>
</div>

</div>

<script>

// add bootstrap table styles to pandoc tables
function bootstrapStylePandocTables() {
  $('tr.header').parent('thead').parent('table').addClass('table table-condensed');
}
$(document).ready(function () {
  bootstrapStylePandocTables();
});


</script>

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
